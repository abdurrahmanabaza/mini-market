<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <title>تجربة السوق</title>
  <style>
    body { font-family: Arial; direction: rtl; padding:20px; }
    .product { border:1px solid #ccc; margin:10px; padding:10px; border-radius:6px; }
    .price { color:green; font-weight:bold; }
  </style>
</head>
<body>

<h1>منتجاتنا</h1>
<div id="productsContainer">جارٍ تحميل المنتجات...</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDqUZQR3O5Ux3nyWsbgdnlQxcAU7qKXrKU",
  authDomain: "local-products-82f7d.firebaseapp.com",
  databaseURL: "https://local-products-82f7d-default-rtdb.firebaseio.com",
  projectId: "local-products-82f7d",
  storageBucket: "local-products-82f7d.appspot.com",
  messagingSenderId: "92892216531",
  appId: "1:92892216531:web:b39013834c0215eaf2e826"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function loadProducts() {
  db.ref("products").once("value").then(snapshot => {
    const data = snapshot.val();
    const container = document.getElementById("productsContainer");
    container.innerHTML = "";
    if (!data) {
      container.innerHTML = "لا توجد منتجات في القاعدة";
      return;
    }
    const items = Object.values(data);
    items.forEach(item => {
      container.innerHTML += 
        <div class="product">
          <h3>${item.name}</h3>
          <p class="price">السعر: ${item.value} ل.س</p>
          <p>الكمية: ${item.quantity}</p>
        </div>
      ;
    });
  }).catch(err => {
    console.error("خطأ:", err);
    document.getElementById("productsContainer").innerText = "فشل الاتصال بقاعدة البيانات";
  });
}

loadProducts();
</script>
</body>
</html>
